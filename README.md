# Dataviz IMDB

[Link Visualization](https://vega.github.io/editor/#/url/vega-lite/N4IgJAzgxgFgpgWwIYgFwhgF0wBwqgegIDc4BzJAOjIEtMYBXAI0poHsDp5kTykBaADZ04JAKyUAVhDYA7EABoQAEySYUqUAwBOgtBmx5CBbUgDu1OoyYMIcbVDmY4szJUcICggGb9V6gn8kYhoAL34aBGUmfhxtNkk4KEwCZBpZAgBxF204AGE2BldtAE8AMRpBBHcIYhAAXyVlOGhtGhxMdnl0ABVc2WUAAjZvQfo4QeD7JDIJgEkAWQARJkHoNlzJgcG6CB3Xe34ARwYkbU7BCdNZWcHvDcGENhCWu-iEQYBGAE4ANgAGMZsQYAJn+YIUgzI8QYODgQ3u2jG8EGjiKmFKw1GcTYygYyS6lEGZQecCQsChcDY0KQOBgNCgSEEk1ySEh40GJTJSLMVmRE3pZHgEEwk1IpluixWa0cmxgSD2TDgLh2zVcNG8NHhyJhQsmg1yQxwbHSbmJpPJME53MhdAA5HsIDA2GZZPzBkqRQa1Nqni87g8OXZLsltbNqaY6QymSyyYoQI5ZJqyGhQEgAB40CCpkCdTCXEmuADKYTgaAhuboBac+gAEnBBKROoz43nLgVBBt9ABibxiKBMfvx6E0ZRoDEMOBKEfKDtd9Dd74Adj+3xBAGZPg1GiAcGckAhs6gANqgWQHsvoADq8Fy8eITMn+gAgoI9EomOkx5oQOkcAxMH0YMkkApQ2A6Loj2PEBX3fEA8iQc9VHjMprigMslGybRkFkEp41rOQyEGABpQj4zmAYaBQJQ5nUQQ8KUAApWlEPjHodAAazgBiQAAVWI+NeKLZ8QAAXXqepRKUDFEIgREEDQU8QE1QRnG0fQb3sCYAF5tMGO1YLtQYAB9jMGfwGGqNFihKQZdMGTS70aUAVLUnNOgQOBeNkOh9C5M5401BtvxAfz1OnZw0B+AEJKkkBiETRlAJPUA20vVK4HTZLoM0t0ry090ACEWlFBZni1PYFiQZoAH4xKUe5i1LNB11+Bqa3QetGzgZtqOUpwi0wEpLn0Qq2EEMclEcTt1IXT4kE+AAOJb4yYBUG3SS8QGEWQ4H4Jg2GwNgFKUCBmDSl8oFlZR0iIzBgSlJh4zOpg0sLTAS1CS913+U7zqrOB3rrBsm2jZ7-vzQGnHymghWSkADom8HXoBgAFaqbpuNAABY-pRyG51mkBe37QcoAaJR4FhrAcbEX6QF5ZR6DQAF6ZcRxMZTH903cyIvJ8+GwsCrUkfQIXpJKOF9GcBBjVMOCLtQWQGDfU7GRGn9lGOpB0hzPdTAU9AmG0WwYG3CSlEEJAuVmpTkG0Dj3MlrazjjMC9ygOg8NQf5KEWpRTXsY0rci9Bz0wHQmXjab52J7x-igbx12UZRyZ3dncVunNvbTMhoT4UOQCOddheC-RgjIAB9YhDow3Nnf0E5ELzNQaFIZ71fSkAvviNBvCZOwLdCkEcxmfOKELo4twakWQor6va-NhRQHtx2fyGqX0B2uvA+0YOfX0cPI7gmOie7f4L8v7xFue5rUGx9PZA5rOfxzkAx9yCeXfFGY66C0X37ECrjXSKEtN5F1OOqdQnR25qyZF3HubA+4DzgDuRWMEf6SmWKsdYTkLapWuHJDYhslIfwLpeJS4F9DIB5jPMu6B54gLrgqahGYF6RWciAKhDDMF-1nuXIB7DmFHhAJ5RCQiKagG4YA6YsxS4AKYdmJQLD0BiNkEI7MnDpEIF1nQgBjDF7KJETo9RTDJFcJwPoayoFlL8PQEEeMKiQDqL9BVcx0izhkBofIuegizFGPLtoLxbCzGSWnDCHATBvbQSFuJOKVsbaKRXmcNeqUG7oGNKaaO41Y7n0vhfa+ws3w9nyQUm+p074VigMISxqB+6CEHpw1eTtwHOCytkmaJTSmFPak1L6UUQRNG9vwT4Ygpo1OQQ0qc21Ii+VQKM+mjUPpDQ1r+OiDIKYgAzpzdymVkouTse-IJNChGUAukPfWB4oJngvPoZ04pnoNhAi0ramTXA+KgqFbk9VnHchKuOE20y5DUMKHYZ49ho6XACqo0FVIALxm2bdT5PNxKSTCVsp+mcsY-nAuSL2OZEw3U6MCn8D5BBPnmUoS5hsMDgvCls2WQ1JmDyUGSil-wdxv3-iFE5-j67gKblA1usCQDQHgTmRBzLUFoLYONTotSlIeX5nMr5AU9EhXFpWSG+gACa3zOHcsCcE9MpyLrSQBqNEqgwyovHMYa1RZJTGGP5VtQVLcYF-2IWofQlAQTeFbBa9Az4gGDEejKDYZYDWHN5c6jerrIHurbp67C3r0C+v9ea7V6AqrplDdg8NTll62PoaI9IEiwHxubnQYVybkDw3TQGrNIAFjpDzdKXBkai32tEY6jRrZ0kQKrdApNgUvX1pBEorVqzg1EQAGq100V2w5LjyotH7QKhN1aPWjpTeOyd6DuxYkeKuzRqKi0yVkEQ7CST3550-gfFKFiBGyL4SWgxoD37GN7aEuK0JCiROiaq9S4ki28gGC6G90jriOwCegaDDQ4oyHODe7tajy1cO0M0ImzRoAuB2WipdqkIX2LUJZSg0G7J6S3OixF2LQBvzIV-VhtDi0ALQ3yuNjdN3DvbkPZp68B2ewcCNU6GI2BcR7N4bw2N-gyaKXoBcUmZNyYqf0+ZYJYqcMZszVArNKZwGpslRa9MEnEaUtS65zjblGxNk6R5IZ9kuv0LvMlCLMWc2RWJWKSh+NpPAa7Pqp9JMJyTtEbGz0xMSaNlbKAMHcyytUu0AFk5H7PzoyAHm68+beRVZq7tmrFbKzfJy0ed7yFWMKO89V+gHGZtWYekYx6XiLvi3KpLj6lU5cFt86rYsetTq2nqgKnDGMPoTJVmxB6j2uLXWitF4kgA/view) 

My colleges and me created an interactive visualization for an university project to show:

- Trend of the average IMDb score and its inter-quartile range for movies from 1960 to 2020, grouped for the country of production. 
- For each geographical area, the year with the highest average IMDb score has been identified through a red point. 
- For each year, it's shown the best rated movie for the selected geographical area

Everything was made with Vega-lite and using the IMDB dataset.

![image](image1.png)

![image](image2.png)

![image](image3.png)

![image](image4.png)

The used code in vega-lite:

```json
{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "GenreCountryFilm.csv"
  },
  "description": "Trend of the average IMDb score and its inter-quartile range for movies from 1960 to 2020, grouped for the country of production. For each geographical area, the year with the highest average IMDb score has been identified through a red point. For each year, it's shown the best rated movie for the selected geographical area",
  "config": {
    "axis": {
      "titleFontSize": 20,
      "titleFont": "Helvetica",
      "titleColor": "#f5cb5c",
      "grid": true,
      "gridColor": "#97969231"
    }
  },
  "params": [
    {
      "name": "Where",
      "value": "All",
      "bind": {
        "input": "select",
        "options": [
          "All",
          "Canada",
          "France",
          "Germany",
          "Hong Kong",
          "India",
          "Italy",
          "Japan",
          "Turkey",
          "UK",
          "USA"
        ]
      }
    }
  ],
  "transform": [
    {"filter": "Where == 'All' || datum.country == Where"},
    {"filter": {"timeUnit": "year", "field": "year", "gte": 1960}}
  ],
  "vconcat": [
    {
      "title": {
        "text": ["When Were the Best Movies Made?"],
        "fontSize": 36,
        "font": "Helvetica",
        "fontStyle": "Bold",
        "color": "#1a1818",
        "baseline": "line-bottom",
        "subtitle": "According to IMDb",
        "subtitleFontSize": 30,
        "subtitleFont": "Helvetica",
        "subtitleFontWeight": "bold",
        "subtitlePadding": 4,
        "subtitleColor": "#f5cb5c"
      },
      "height": 450,
      "width": 600,
      "encoding": {
        "x": {
          "timeUnit": "year",
          "field": "year",
          "type": "temporal",
          "title": null,
          "scale": {"domain": {"param": "brush"}}
        }
      },
      "layer": [
        {
          "mark": {
            "type": "area",
            "opacity": 0.8,
            "interpolate": "natural",
            "color": "#f0cf3ddc"
          },
          "encoding": {
            "y": {
              "aggregate": "q3",
              "field": "avg_vote",
              "type": "quantitative",
              "scale": {"zero": false}
            },
            "y2": {"aggregate": "q1", "field": "avg_vote"}
          }
        },
        {
          "mark": {
            "type": "line",
            "interpolate": "natural",
            "color": "#000000f8",
            "size": 4
          },
          "encoding": {
            "y": {
              "aggregate": "average",
              "field": "avg_vote",
              "type": "quantitative",
              "scale": {"zero": false},
              "title": "Average IMDb score"
            }
          }
        },
        {
          "transform": [
            {
              "aggregate": [
                {"op": "max", "field": "avg_vote", "as": "max_vote"},
                {"op": "average", "field": "avg_vote", "as": "mean_vote"},
                {"op": "average", "field": "votes", "as": "mean_votes"},
                {"op": "min", "field": "avg_vote", "as": "min_vote"},
                {"op": "count", "field": "data", "as": "n_movies"},
                {"op": "argmax", "field": "avg_vote", "as": "argmax_vote"}
              ],
              "groupby": ["year"]
            }
          ],
          "layer": [
            {
              "mark": {
                "type": "point",
                "color": "#000000f8",
                "fill": "#000000f8",
                "size": 20,
                "clip": false
              }
            },
            {
              "mark": {
                "type": "text",
                "color": "#000000f8",
                "fontSize": 12,
                "dy": -15,
                "clip": false,
                "limit": 150,
                "fontStyle": "italic"
              },
              "encoding": {"text": {"field": "argmax_vote.title"}},
              "params": [
                {
                  "name": "hover",
                  "select": {
                    "type": "point",
                    "fields": ["year"],
                    "nearest": true,
                    "on": "mouseover",
                    "clear": "mouseout",
                    "encodings": ["x"]
                  }
                }
              ]
            }
          ],
          "encoding": {
            "opacity": {
              "condition": {"value": 1, "param": "hover", "empty": false},
              "value": 0
            },
            "y": {
              "field": "max_vote",
              "type": "quantitative",
              "scale": {"zero": false}
            },
            "tooltip": [
              {"timeUnit": "year", "field": "year", "title": "Year"},
              {"field": "argmax_vote.title", "title": "Best Movie"},
              {
                "field": "mean_vote",
                "type": "quantitative",
                "format": ".2f",
                "title": "Avg IMDb score"
              },
              {
                "field": "max_vote",
                "type": "quantitative",
                "format": ".2f",
                "title": "Max IMDb score"
              },
              {
                "field": "min_vote",
                "type": "quantitative",
                "format": ".2f",
                "title": "Min IMDb score"
              },
              {
                "field": "mean_votes",
                "type": "quantitative",
                "format": ".2s",
                "title": "Avg Votes"
              },
              {
                "field": "n_movies",
                "type": "quantitative",
                "format": ".2s",
                "title": "# of movies"
              }
            ]
          }
        },
        {
          "transform": [
            {
              "aggregate": [
                {"op": "average", "field": "avg_vote", "as": "mean_vote"}
              ],
              "groupby": ["year"]
            },
            {
              "window": [{"op": "rank", "as": "rank"}],
              "sort": [{"field": "mean_vote", "order": "descending"}]
            },
            {"filter": "datum.rank == 1"}
          ],
          "encoding": {
            "y": {
              "aggregate": "max",
              "field": "mean_vote",
              "type": "quantitative"
            }
          },
          "mark": {
            "type": "circle",
            "stroke": "#ff4040",
            "fill": "#ff4040",
            "size": 120
          }
        }
      ]
    },
    {
      "width": 600,
      "height": 80,
      "layer": [
        {
          "params": [
            {
              "name": "brush",
              "select": {"type": "interval", "encodings": ["x"]}
            }
          ],
          "mark": {
            "type": "area",
            "color": "#f0cf3db4",
            "stroke": "black",
            "tooltip": true
          },
          "encoding": {
            "x": {"timeUnit": "year", "field": "year", "title": null},
            "y": {
              "aggregate": "count",
              "field": "data",
              "title": "# of movies"
            },
            "tooltip": [
              {"timeUnit": "year", "field": "year", "title": "Year"},
              {"aggregate": "count", "title": "# of movies"}
            ]
          }
        }
      ]
    }
  ]
}
```

source data: https://www.imdb.com/
